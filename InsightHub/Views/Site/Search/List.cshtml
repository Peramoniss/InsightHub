@using InsightHub.Models;
@{
    Layout = "_Layout";
    ViewData["Title"] = "Researcher List Page";
    var soma = 0;
}

<section class="productions">
    @if(ViewBag.Projetos != null && ViewBag.Pesquisadores != null){
        soma = ViewBag.Projetos.Count+ViewBag.Pesquisadores.Count;
    }else if(ViewBag.Projetos == null && ViewBag.Pesquisadores != null){
        soma = ViewBag.Pesquisadores.Count;
    }else if(ViewBag.Projetos != null && ViewBag.Pesquisadores == null){
        soma = ViewBag.Projetos.Count;
    }
    <h1 class="text text--20 text--white text--fw600 mb-5">@((ViewBag.Projetos == null && ViewBag.Pesquisadores == null) ? "Sua busca não retornou resultados:" : "Sua busca retornou "+ soma + " resultados");</h1>
    <div class="productions__wrapper" style="@((soma == 0) ? "display: none;" : "")">
        <div class="left">
            <h3 class="text text--white text--13 mb-2">Filtros</h3>
            <form action="/busca" method="POST">
                <input type="text" value="@ViewBag.FastSearch" id="FastSearch" name="FastSearch" style="display: hidden;">
                <div class="cards">
                    <div class="card">
                        <div>Resultados da busca</div>
                        <select onchange="this.form.submit()" id="Goal" name="Goal">
                            <option value="Projeto" selected="@((ViewBag.Goal != null && ViewBag.Goal == "Projeto") ? true : false)">Projetos de pesquisa</option>
                            <option value="Pesquisador" selected="@((ViewBag.Goal != null && ViewBag.Goal == "Pesquisador") ? true : false)">Pesquisadores</option>
                            <option value="Ambos" selected="@((ViewBag.Goal != null && (ViewBag.Goal == "Projeto" || ViewBag.Goal == "Pesquisador")) ? false : true)">Ambos</option>
                        </select>
                    </div>
                    <div class="card">
                        <div>Area</div>
                        <select onchange="this.form.submit()" id="Area" name="Area">
                            @foreach (SubareaConhecimento area in ViewBag.Subareas)
                            {
                                <option value="@area.Id" selected="@((ViewBag.Area != null && int.Parse(ViewBag.Area) == area.Id) ? true : false)">@area.Nome</option>
                            }
                            <option selected="@((ViewBag.Area == null) ? true : false)" value="">Nenhuma</option>
                        </select>
                    </div>
                    <div class="card">
                        <div>Filtro um</div>
                    </div>
                    <div class="card">
                        <div>Filtro um</div>
                    </div>
                </div>
            </form>
        </div>
        <div class="right">
            <div class="top-row mb-2">
                <div class="order text text--white text--13">Ordenar por: <strong>Mais Relevante</strong></div>
                <div class="result text text--white text--13">resultado: 1 de 10.000 (página 1 de 5)</div>
            </div>
            <div class="list">
                @if(ViewBag.Projetos != null)
                {
                    @foreach (Projeto projeto in ViewBag.Projetos)
                    {
                        <a href="projetos/@projeto.Id" class="item js-open-modal">
                            <h2 class="text text--black text--20 text--fw600 mb-2">@projeto.Nome</h2>
                            <p class="text text--black text--15 text--fw400 mb-2">@projeto.Subarea.Nome
                            </p>
                            <div class="members">
                                @*@foreach (Pesquisador pesquisador in projeto.Pesquisadores)
                                {
                                    <div class="member text text--black text--fw500">@pesquisador.Nome</div>
                                }*@
                            </div>
                            <div class="complement text text--black text--fw500">Projeto de Pesquisa</div>
                        </a>
                    }
                }

                @if (ViewBag.Pesquisadores != null)
                {
                    @foreach (Pesquisador pesquisador in ViewBag.Pesquisadores)
                    {
                        <a href="projetos/@pesquisador.Id" class="item js-open-modal">
                            <h2 class="text text--black text--20 text--fw600 mb-2">@pesquisador.Nome</h2>
                            <p class="text text--black text--15 text--fw400 mb-2">@pesquisador.Subarea.Nome
                            </p>
                            <div class="complement text text--black text--fw500">Pesquisador</div>
                        </a>
                    }
                }
            </div>
        </div>
    </div>
</section>